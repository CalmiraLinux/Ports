# Обновление системы портов до новой версии

Система портов дистрибутива Calmira GNU/Linux-libre активно развивается: в неё
добавляются новые порты, а уже имеющиеся обновляются до новых версий. В новых
версиях ПО исправляют ошибки и уязвимости, а также добавляют новые функции,
поэтому поддержание системы портов в актуальном состоянии очень важно как для
пользователя, так и для операционной системы.

## Репозиторий

Система портов скачивается из этого репозитория в виде архива, в котором
содержатся как сами порты, так и метаданные, включающие в себя список релизов
Calmira, с которыми совместима система портов, а также список программного
обеспечения, которое в эту систему входит.

На данный момент существует две ветки: `stable` и `testing`. Порты в них
обновляются по т.н. rolling модели, привязки к какому-либо конкретному
дистрибутиву нет. В планах сделать отдельные ветки для каждого поддерживаемого
на данный момент релиза.

Ветка по умолчанию, с которой скачивается система портов, содержится в
параметрах менеджера `cport`: `/etc/cport.toml`.

## Процесс обновления системы портов

С указанной в параметрах ветки скачивается и распаковывается в кеш архив системы
портов. После скачивания выполняется проверка на совместимость системы портов с
текущим дистрибутивом Calmira GNU/Linux-libre, а также проверка целостности
системы портов. После проверки целостности старая система портов удаляется, на
её место копируется новая.
